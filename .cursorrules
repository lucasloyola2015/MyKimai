---
description: 
---

# ðŸ“‹ Workflow de Desarrollo Profesional (Next.js + Supabase)

Este protocolo es de cumplimiento obligatorio para todas las tareas de ingenierÃ­a en el proyecto. Divide las responsabilidades entre el pensamiento estructural y la ejecuciÃ³n estÃ©tica.

---

### 1. IntrospecciÃ³n y Datos (**@architect**)
* **AcciÃ³n**: Consultar el esquema de la base de datos mediante la habilidad de **Prisma**.
* **Objetivo**: Validar nombres de tablas, columnas y tipos de datos en **Supabase** antes de escribir cÃ³digo.
* **Salida**: Confirmar si el esquema actual soporta la nueva funcionalidad o si requiere una migraciÃ³n.

### 2. PlanificaciÃ³n de DiseÃ±o (**@designer**)
* **AcciÃ³n**: Proponer por chat la estructura del componente.
* **Objetivo**: Detallar cÃ³mo se adaptarÃ¡ la UI a mÃ³viles y quÃ© variables de **Tailwind CSS** se usarÃ¡n.
* **RestricciÃ³n**: Debe cumplir con el estÃ¡ndar de "DiseÃ±o Compacto e Instrumental" y "Modo Oscuro" definido en las reglas.

### 3. ImplementaciÃ³n AtÃ³mica (Colaborativo)
* **LÃ³gica (@architect)**: Crear los tipos de **TypeScript** y desarrollar las **Server Actions** para la comunicaciÃ³n segura con el backend.
* **Interfaz (@designer)**: Construir la UI en Next.js utilizando componentes livianos y lÃ³gica **Mobile-First**.

### 4. ValidaciÃ³n TÃ©cnica (**@architect**)
* **AcciÃ³n**: Ejecutar `npm run build` localmente antes de cualquier push.
* **Objetivo**: Forzar la compilaciÃ³n de Next.js. Vercel falla si hay un solo error de TypeScript o un import mal referenciado (case-sensitive), algo que `npm run dev` suele ignorar.
* **Prisma Check**: Ejecutar `npx prisma generate` para asegurar que el motor de consultas estÃ© sincronizado con el build.

### 5. Test Visual E2E (**@designer**)
* **AcciÃ³n**: Utilizar la habilidad de **Puppeteer** para abrir el navegador en modo headless.
* **Objetivo**: Verificar la responsividad en resoluciones mÃ³viles (ej. 390x844px) y confirmar que los datos se guardan correctamente en la DB.

### 6. AuditorÃ­a de Rendimiento (Ambos)
* **Objetivo**: Garantizar que el componente no cause re-renders innecesarios y que el bundle final en **Vercel** sea ligero y rÃ¡pido.

### 7. Deployment & Sync (**@devops**)
* **AcciÃ³n**: Realizar un commit semÃ¡ntico y hacer `git push origin main`.
* **Objetivo**: Sincronizar cambios con el repositorio existente `https://github.com/lucasloyola2015/MyKimai`.
* **ValidaciÃ³n**: Verificar que el remoto estÃ© configurado y usar las credenciales de Git de Windows.
* **Entorno**: Asegurar que las variables locales coincidan con las de Vercel (especialmente `DATABASE_URL`).
* **Push**: Solo se realiza el push si el build local del paso 4 fue exitoso (zero errors).

---

## âš¡ COMANDOS RÃPIDOS (Macros)

### > "Sincronizar proyecto"
Al recibir esta instrucciÃ³n, el sistema ejecutarÃ¡ automÃ¡ticamente la cadena de cierre:
1. **@architect**: Genera cliente Prisma (`npx prisma generate`).
2. **@architect**: Ejecuta build de producciÃ³n (`npm run build`).
3. **@devops**: Si el build tiene **0 errores**, realiza commit y `push` a `MyKimai`.
4. **@devops**: Notifica el inicio del despliegue en Vercel.

---

## Roles

Los roles del workflow se definen en los siguientes archivos:

- **@architect** â€” `.agent/rules/architect.md` â€” Senior Framework Architect: arquitectura Next.js/Supabase, Server Actions, type safety, Prisma, RLS.
- **@designer** â€” `.agent/rules/designer.md` â€” UI/UX Specialist: Mobile-First, diseÃ±o instrumental, Tailwind CSS, skeletos y estados visuales.
- **@devops** â€” `.agent/rules/devops.md` â€” Deployment & CI/CD Specialist: Git, Vercel, variables de entorno, builds y sincronizaciÃ³n con el repositorio.
